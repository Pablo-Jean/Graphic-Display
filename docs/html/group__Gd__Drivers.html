<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Graphic Display: Driver Definition and Creation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="g15.png"/></td>
  <td id="projectalign">
   <div id="projectname">Graphic Display<span id="projectnumber">&#160;v1.0.0</span>
   </div>
   <div id="projectbrief">Control any mochrome display, with any microcontroller, in any amount.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__Gd__Drivers.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a>  </div>
  <div class="headertitle"><div class="title">Driver Definition and Creation</div></div>
</div><!--header-->
<div class="contents">

<p>Driver definition for the Graphic Display library, this driver is the main reason why we can use any display with this library, you just need to create functions that are compatible with this structure.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgd__driver__t.html">gd_driver_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struct that creates a driver for the display, holding the handle and functions that are private of the display driver. This allows the library to be very flexible and can handles any display.  <a href="structgd__driver__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Driver definition for the Graphic Display library, this driver is the main reason why we can use any display with this library, you just need to create functions that are compatible with this structure. </p>
<h2><a class="anchor" id="autotoc_md0"></a>
&gt;&gt; Step by Step:</h2>
<h3><a class="anchor" id="autotoc_md1"></a>
1. Create a folder inside drivers with the name of driver device.</h3>
<p>Create a folder to place the source code of your driver, in this way, we can keep a clean and nice repository.</p>
<h3><a class="anchor" id="autotoc_md2"></a>
2. Create the .h and .c file for you device.</h3>
<p>Suppose we create a driver for a fictional ss9090 device, we will create <b>ss9090.h</b> and <b>ss9090.c files</b>.</p>
<h3><a class="anchor" id="autotoc_md3"></a>
3. In header file, create the handle structure</h3>
<p>The handle structure is used to keep data of a display, with this approach, we can have many displays our project requires, and this displays can be the same or different.</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span>{</div>
<div class="line">    <span class="comment">// define the parameters that you need and functions to handle the device</span></div>
<div class="line">}ss9090_t;</div>
</div><!-- fragment --><p>The most common parameters are the:</p><ul>
<li>Height and Width of the display;</li>
<li>Frame Buffer pointer;</li>
<li>Communication Functions (For SPI, we have the Chip Select and SPI transfer, For I2C, commonly has only the write function).</li>
</ul>
<p>Other parameters, that's are optional, but recommended, if a function to mutex lock and unlock (useful for RTOS environments that need threadsafe), and Delay Milliseconds routine, some times, delay is mandatory in initialization.</p>
<p>Remember, the driver must be not glued with any chipset, this library must be compatible with any microcontroller.</p>
<h3><a class="anchor" id="autotoc_md4"></a>
4. Create routines</h3>
<p>Here, we have the MANDATORY FUNCTIONS, must be implemented by you, following the fictional ss9090, we have this prototypes:</p>
<div class="fragment"><div class="line">uint8_t SS9090_Init(ss9090_t *ss9090, ss9090_params_t *params);</div>
<div class="line">uint8_t SS9090_Refresh(ss9090_t *ss9090);</div>
<div class="line">uint8_t SS9090_WritePixel(ss9090_t *ss9090, uint32_t x, uint32_t y, <span class="keywordtype">bool</span> color);</div>
<div class="line">uint8_t SS9090_Fill(ss9090_t *ss9090, uint8_t color);</div>
</div><!-- fragment --><ul>
<li>Q: I can modify functions names?</li>
<li>A: Yes, you can!</li>
<li>Q: I can modify parameters of the functions?</li>
<li>A: No, you have the use the same parameters, in same order, and, parameters size, must be compatible.</li>
<li>Q: Must be compatible to use without Graphic Display?</li>
<li>A: Yes</li>
</ul>
<h3><a class="anchor" id="autotoc_md5"></a>
4.5 Test</h3>
<p>At this point, test your library, check if initialization works, if the pixels are written into correct position, response speed, and everything else.</p>
<p>After you test your driver, you can move on to the next steps.</p>
<h3><a class="anchor" id="autotoc_md6"></a>
5. Add include into GraphicDisplay.h</h3>
<p>Go to <em><a class="el" href="GraphicDisplay_8h.html">GraphicDisplay.h</a></em> and include the new driver</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;driver/ss9090/ss9090.h&quot;</span></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md7"></a>
6. Create extern pointer to driver</h3>
<p>Before the Public functions, you will see a piece of code with the Driver externs.</p>
<p>Here, you need to create the extern pointer to the driver, this will help developer to insert the driver on code. For SS9090, we write as follows the extern:</p>
<div class="fragment"><div class="line"><span class="keyword">extern</span> <a class="code hl_struct" href="structgd__driver__t.html">gd_driver_t</a>* Gd_Driver_SS9090;</div>
<div class="ttc" id="astructgd__driver__t_html"><div class="ttname"><a href="structgd__driver__t.html">gd_driver_t</a></div><div class="ttdoc">Struct that creates a driver for the display, holding the handle and functions that are private of th...</div><div class="ttdef"><b>Definition</b> GraphicDisplay.h:217</div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md8"></a>
7. Instance the Driver Variable</h3>
<p>Go to <em><a class="el" href="GraphicDisplay_8c.html">GraphicDisplay.c</a></em>, in the beginning, you will see the structs containing the drivers, now, creates the instance attributing the function calls to the struct, and the pointer. Here, we use pointers, because they are more fast to pass as a parameters. For our fictional SS9090 driver, we have something similar to this:</p>
<div class="fragment"><div class="line"><span class="comment">// Diver for SS9090 </span></div>
<div class="line"><a class="code hl_struct" href="structgd__driver__t.html">gd_driver_t</a> _Gd_Driver_SS9090Attr = {</div>
<div class="line">        .<a class="code hl_variable" href="structgd__driver__t.html#a4160faa3f8da427a3941ad11bafc74f0">pHandle</a> = NULL,</div>
<div class="line">        .fxnSetPixelColor = <a class="code hl_define" href="GraphicDisplay_8c.html#accd51e349e2545860ef4fa3ca42bbbf9">_SET_PIXEL_COLOR_TYPECAST</a>       SS9090_WritePixel,</div>
<div class="line">        .fxnFillFrameBuffer = <a class="code hl_define" href="GraphicDisplay_8c.html#a0202b385f165b17c1b122085d3bc2484">_FILL_FRAME_BUFFER_TYPEFCAST</a>  SS9090_Fill,</div>
<div class="line">        .fxnRefreshDisp = <a class="code hl_define" href="GraphicDisplay_8c.html#a217f263a70f204c3901d479b864e1326">_REFRESH_DISP_TYPECAST</a>            SS9090_Refresh,</div>
<div class="line">        .fxnSetOn = <a class="code hl_define" href="GraphicDisplay_8c.html#a85a107bbd540349781df3d8399e79a0a">_SET_ON_TYPECASTAT</a>                      NULL,</div>
<div class="line">        .fxnSetContrast = <a class="code hl_define" href="GraphicDisplay_8c.html#a47d1fd5a8bffc7dcbf3c9693bd4db2bd">_SET_CONTRAST_TYPECAST</a>            NULL</div>
<div class="line">};</div>
<div class="line"><a class="code hl_struct" href="structgd__driver__t.html">gd_driver_t</a> *Gd_Driver_SS9090 = &amp;_Gd_Driver_SS9090Attr;</div>
<div class="ttc" id="aGraphicDisplay_8c_html_a0202b385f165b17c1b122085d3bc2484"><div class="ttname"><a href="GraphicDisplay_8c.html#a0202b385f165b17c1b122085d3bc2484">_FILL_FRAME_BUFFER_TYPEFCAST</a></div><div class="ttdeci">#define _FILL_FRAME_BUFFER_TYPEFCAST</div><div class="ttdef"><b>Definition</b> GraphicDisplay.c:23</div></div>
<div class="ttc" id="aGraphicDisplay_8c_html_a217f263a70f204c3901d479b864e1326"><div class="ttname"><a href="GraphicDisplay_8c.html#a217f263a70f204c3901d479b864e1326">_REFRESH_DISP_TYPECAST</a></div><div class="ttdeci">#define _REFRESH_DISP_TYPECAST</div><div class="ttdef"><b>Definition</b> GraphicDisplay.c:24</div></div>
<div class="ttc" id="aGraphicDisplay_8c_html_a47d1fd5a8bffc7dcbf3c9693bd4db2bd"><div class="ttname"><a href="GraphicDisplay_8c.html#a47d1fd5a8bffc7dcbf3c9693bd4db2bd">_SET_CONTRAST_TYPECAST</a></div><div class="ttdeci">#define _SET_CONTRAST_TYPECAST</div><div class="ttdef"><b>Definition</b> GraphicDisplay.c:26</div></div>
<div class="ttc" id="aGraphicDisplay_8c_html_a85a107bbd540349781df3d8399e79a0a"><div class="ttname"><a href="GraphicDisplay_8c.html#a85a107bbd540349781df3d8399e79a0a">_SET_ON_TYPECASTAT</a></div><div class="ttdeci">#define _SET_ON_TYPECASTAT</div><div class="ttdef"><b>Definition</b> GraphicDisplay.c:25</div></div>
<div class="ttc" id="aGraphicDisplay_8c_html_accd51e349e2545860ef4fa3ca42bbbf9"><div class="ttname"><a href="GraphicDisplay_8c.html#accd51e349e2545860ef4fa3ca42bbbf9">_SET_PIXEL_COLOR_TYPECAST</a></div><div class="ttdeci">#define _SET_PIXEL_COLOR_TYPECAST</div><div class="ttdef"><b>Definition</b> GraphicDisplay.c:22</div></div>
<div class="ttc" id="astructgd__driver__t_html_a4160faa3f8da427a3941ad11bafc74f0"><div class="ttname"><a href="structgd__driver__t.html#a4160faa3f8da427a3941ad11bafc74f0">gd_driver_t::pHandle</a></div><div class="ttdeci">void * pHandle</div><div class="ttdoc">Handle of the display. The variable that holds all data of device.</div><div class="ttdef"><b>Definition</b> GraphicDisplay.h:219</div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md9"></a>
8. Done</h3>
<p>Your library is implemented, so, almost, all you need to do is test your implementation ans check if everything works as expected.</p>
<p>Any doubts, feel free to open issues into the repository.</p>
<p>Engineer: Pablo Jean Rozario. </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
